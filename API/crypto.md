# –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è, —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Ç—Ä–µ–±—É—é—Ç (–∏–ª–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç) –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏–ª–∏ —à–∏—Ñ—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ. –¢–∞–∫ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ —Ç–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –æ–±—ã—á–Ω–æ –Ω–µ—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Ç–µ–º –±–æ–ª–µ–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –û–ø—Ç–∏–º–∞–∫—Ä–æ—Å, –æ–Ω–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–∞.

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Crypto<a name="crypto"></a>
```ts
interface Crypto {
	sha1(data: string): string;

	hash(algo: string , data: string , binary: boolean = false): string | BinaryData;

	hmac(algo: string, data: string, key: string | BinaryData, binary: boolean = false): string | BinaryData;

	getHashAlgorithms(): string[];

	getHmacAlgorithms(): string[];
}
```
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –∏ –∏—Ö –¥–æ–ø–æ–ª–Ω—è—é—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏.

&nbsp;

```js
sha1(data: string): string
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç [`SHA1-—Ö—ç—à`](https://en.wikipedia.org/wiki/SHA-1) —Å—Ç—Ä–æ–∫–∏ `data` (–ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ `UTF-8`), –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É `US Secure Hash Algorithm 1` –≤ –≤–∏–¥–µ `40`-—Å–∏–º–≤–æ–ª—å–Ω–æ–≥–æ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–≥–æ —á–∏—Å–ª–∞.<br>
–í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ (–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –ø—Ä–æ—à–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤) –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```js
let hash = om.crypto.sha1('data');
console.log(
    hash // a17c9aaa61e80a1bf71d0d850af4e5baa9800bbd
);
```

&nbsp;

```js
hash(algo: string , data: string , binary: boolean = false): string | BinaryData
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ö—ç—à —Å—Ç—Ä–æ–∫–∏ `data` (–ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ `UTF-8`), –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ `algo` –∞–ª–≥–æ—Ä–∏—Ç–º—É ("sha1", "md5", "sha256" –∏ —Ç.–¥.). –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `getHashAlgorithms()`.<br>
–ï—Å–ª–∏ `binary` –Ω–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ `true` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏–µ –Ω–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–æ), —Ç–æ —Ö—ç—à –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–π —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ.<br>
–ï—Å–ª–∏ `binary` –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ `true`, —Ç–æ —Ö—ç—à –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `BinaryData`.<br>
–í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –ø—Ä–æ—à–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤) –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```js
let hash = om.crypto.hash('sha1', 'data');
console.log(
    hash // a17c9aaa61e80a1bf71d0d850af4e5baa9800bbd
);
```
```js
try {
    // 'sha2' will trigger exception
    let hash = om.crypto.hash('sha2', 'some data');
    console.log(hash);
} catch (e) {
    console.log(`Error: ${e.message}`);
}

```

&nbsp;

```js
hmac(algo: string, data: string, key: string | BinaryData, binary: boolean = false): string | BinaryData
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç [`HMAC (Hash-based Message Authentication Code)`](https://ru.wikipedia.org/wiki/HMAC) –¥–ª—è —Å—Ç—Ä–æ–∫–∏ `data` (–ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ `UTF-8`).<br>
–î–ª—è –ø–æ–¥–ø–∏—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `key`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ `UTF-8` –∏–ª–∏ –±–∏–Ω–∞—Ä–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `BinaryData`.<br>
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `hash` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –≤ `algo` –∞–ª–≥–æ—Ä–∏—Ç–º ("sha1", "sha256", "sha512" –∏ —Ç.–¥.) –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è. –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `getHmacAlgorithms()`.<br>
–ï—Å–ª–∏ `binary` –Ω–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ `true` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏–µ –Ω–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–æ), —Ç–æ hmac –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–π —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ.<br>
–ï—Å–ª–∏ `binary` –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ `true`, —Ç–æ —Ö—ç—à –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `BinaryData`.<br>
–í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ (–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –ø—Ä–æ—à–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤) –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```js
let hash = om.crypto.hmac('sha1', 'data', 'some secret key');
console.log(
    typeof hash // string
);
console.log(
    hash // 8b992587610f000c8e5cae70826b2a46d872bfb5
);
```
```js
let hash = om.crypto.hmac('sha1', 'data', 'some secret key', true);
console.log(
    typeof hash // object
);
console.log(
    hash.getData() // ÔøΩÔøΩ%ÔøΩa
);
```

&nbsp;

```js
getHashAlgorithms(): string[]
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `algo` –¥–ª—è –º–µ—Ç–æ–¥–∞ `hash`.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```js
let algos = om.crypto.getHashAlgorithms();
console.log('Available hashing algorithms:\n');
algos.forEach(algo => {
    console.log('    ' + algo + '\n');
});

```

&nbsp;

```js
getHmacHashAlgorithms(): string[]
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `algo` –¥–ª—è –º–µ—Ç–æ–¥–∞ `hmac`.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```js
let algos = om.crypto.getHmacHashAlgorithms();
console.log('Available hashing algorithms for HMAC:\n');
algos.forEach(algo => {
    console.log('    ' + algo + '\n');
});

```

&nbsp;

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å BinaryData<a name="binarydata"></a>
```ts
interface BinaryData {
    getAsRawString(): string;
}
```
–°–ª—É–∂–µ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∏–Ω–∞—Ä–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω—ã –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ö—ç—à–µ–π.<br>
–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é, —Ä–∞–∑–≤–µ —Ç–æ–ª—å–∫–æ –∫–æ–º—É-–Ω–∏–±—É–¥—å –∑–∞—Ö–æ—á–µ—Ç—Å—è –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫ –≤—ã–≥–ª—è–¥—è—Ç –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. 

&nbsp;

```js
getAsRawString(): string
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```js
const signature = om.crypto.hmac(algo, stringToSign, signingKey, true);

console.log(signature.getAsRawString());

```

&nbsp;

[API Reference](./API.md)

[–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ](../README.md)
